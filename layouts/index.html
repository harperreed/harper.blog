{{/* layouts/index.html */}}
{{ define "main" }}
<div>
    <!-- Introduction/Bio -->
    {{ with .Content }}
    <div class="prose prose-neutral max-w-none mb-20">
        {{ . }}
    </div>
    {{ end }}

    <!-- Latest Posts -->
    <section class="mb-20">
        <h2 class="text-2xl mb-10">Recent Writing</h2>
        <div class="space-y-6">
            {{ range first 5 (where .Site.RegularPages "Section" "posts") }}
            <article>
                <div class="flex justify-between items-baseline gap-4">
                    <h3 class="text-lg">
                        <a href="{{ .Permalink }}" class="no-underline hover:underline">{{ .Title }}</a>
                    </h3>
                    <time class="text-gray-600 shrink-0" datetime="{{ .Date.Format "2006-01-02" }}">
                        {{ .Date.Format "Jan 02, 2006" }}
                    </time>
                </div>
            </article>
            {{ end }}
        </div>
        <div class="mt-8">
            <a href="/posts" class="text-gray-600 hover:text-gray-900 no-underline">More writing →</a>
        </div>
    </section>

    <!-- Latest Notes -->
    <section>
        <h2 class="text-2xl mb-10">Recent Notes</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            {{ range first 6 (where .Site.RegularPages "Section" "notes") }}
            <article class="group">
                <a href="{{ .Permalink }}" class="no-underline">
                    {{ with .Resources.ByType "image" }}
                        {{ range first 1 . }}
                            {{ $image := .Resize "800x webp" }}
                            <div class="aspect-[3/2] mb-4 overflow-hidden">
                                <img 
                                    src="{{ $image.RelPermalink }}" 
                                    alt="{{ with .Title }}{{ . }}{{ else }}Note image{{ end }}"
                                    class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                                    loading="lazy"
                                    width="{{ $image.Width }}"
                                    height="{{ $image.Height }}"
                                />
                            </div>
                        {{ end }}
                    {{ end }}
                    
                    <div class="space-y-2">
                        <time class="text-gray-600 text-base" datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format "January 2, 2006" }}
                        </time>

                        <div class="prose prose-neutral max-w-none group-hover:text-gray-600">
                            {{ .Content }}
                        </div>

                        {{ with .Params.tags }}
                        <div class="flex flex-wrap gap-2 mt-2">
                            {{ range . }}
                            <span class="text-gray-600 text-base">#{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </a>
            </article>
            {{ end }}
        </div>
        <div class="mt-12">
            <a href="/notes" class="text-gray-600 hover:text-gray-900 no-underline">More notes →</a>
        </div>
    </section>
</div>
{{ end }}
