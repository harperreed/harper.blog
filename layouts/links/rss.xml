{{- /* ABOUTME: Rich RSS feed template for curated links */}}
{{- /* ABOUTME: Includes summaries, source domains, tags, and styled content */}}
{{- printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>" | safeHTML }}
{{- printf "<?xml-stylesheet href=\"/pretty-feed-v3.xsl\" type=\"text/xsl\"?>" | safeHTML }}
<rss version="2.0"
     xmlns:atom="http://www.w3.org/2005/Atom"
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>{{ if eq .Title .Site.Title }}{{ .Site.Title }}{{ else }}{{ with .Title }}{{ . }} on {{ end }}{{ .Site.Title }}{{ end }}</title>
    <link>{{ .Permalink }}</link>
    <description>Recent Links{{ if ne .Title .Site.Title }} on {{ .Site.Title }}{{ end }} - Curated articles and interesting reads</description>
    <generator>Hugo -- gohugo.io</generator>
    {{ with .Site.LanguageCode }}<language>{{ . }}</language>{{ end }}
    {{ with .Site.Author.email }}<managingEditor>{{ . }}{{ with $.Site.Author.name }} ({{ . }}){{ end }}</managingEditor>{{ end }}
    {{ with .Site.Author.email }}<webMaster>{{ . }}{{ with $.Site.Author.name }} ({{ . }}){{ end }}</webMaster>{{ end }}
    {{ with .Site.Copyright }}<copyright>{{ . }}</copyright>{{ end }}
    {{ if not .Date.IsZero }}<lastBuildDate>{{ .Date.Format "Mon, 02 Jan 2006 15:04:05 -0700" | safeHTML }}</lastBuildDate>{{ end }}
    {{ with .OutputFormats.Get "RSS" }}
    {{ printf "<atom:link href=%q rel=\"self\" type=%q />" .Permalink .MediaType | safeHTML }}
    {{ end }}
    <image>
      <url>{{ .Site.BaseURL }}images/favicon.png</url>
      <title>{{ .Site.Title }} - Links</title>
      <link>{{ .Permalink }}</link>
    </image>
    {{ $limit := .Site.Config.Services.RSS.Limit }}
    {{ $pages := .Pages }}
    {{ if gt $limit 0 }}{{ $pages = $pages | first $limit }}{{ end }}
    {{ range $pages }}
        <item>
        <title>{{ .Title | plainify | htmlUnescape }}</title>
        {{ with .Params.original_url }}
        <link>{{ . }}</link>
        {{ else }}
        <link>{{ .Permalink }}</link>
        {{ end }}
        <pubDate>{{ .Date.Format "Mon, 02 Jan 2006 15:04:05 -0700" | safeHTML }}</pubDate>
        {{ with .Site.Author.email }}<author>{{ . }}{{ with $.Site.Author.name }} ({{ . }}){{ end }}</author>{{ end }}
        <guid>{{ .Permalink }}</guid>
        {{- /* Source as dc:source */ -}}
        {{ with .Params.original_url }}
        {{ $url := urls.Parse . }}
        <dc:source>{{ $url.Host }}</dc:source>
        {{ end }}
        {{- /* Tags as categories */ -}}
        {{ with .Params.tags }}
        {{ range . }}
        <category>{{ . }}</category>
        {{ end }}
        {{ end }}
        <content:encoded><![CDATA[
            <article style="font-family:-apple-system,BlinkMacSystemFont,sans-serif;">
            {{- /* Header with source info */ -}}
            {{ with .Params.original_url }}
            {{ $url := urls.Parse . }}
            <div style="margin-bottom:15px;padding:10px 15px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:8px;color:#fff;">
              <span style="font-size:0.9em;opacity:0.9;">ðŸ”— From</span>
              <strong style="margin-left:5px;">{{ $url.Host }}</strong>
            </div>
            {{ end }}

            {{- /* Title */ -}}
            <h2 style="margin:0 0 15px 0;line-height:1.3;">
              {{ with .Params.original_url }}
              <a href="{{ . }}" style="color:#333;text-decoration:none;">{{ $.Title | plainify | htmlUnescape }}</a>
              {{ else }}
              {{ .Title | plainify | htmlUnescape }}
              {{ end }}
            </h2>

            {{- /* Summary */ -}}
            {{ with .Params.summary }}
            <blockquote style="margin:15px 0;padding:15px 20px;background:#f8f9fa;border-left:4px solid #667eea;border-radius:0 8px 8px 0;font-style:italic;color:#555;">
              {{ . }}
            </blockquote>
            {{ end }}

            {{- /* Content/Commentary */ -}}
            {{ with .Content }}
            <div style="margin:15px 0;line-height:1.6;">
              {{ . | html }}
            </div>
            {{ end }}

            {{- /* Tags */ -}}
            {{ with .Params.tags }}
            <div style="margin:20px 0;">
              {{ range . }}
              <span style="display:inline-block;padding:4px 12px;margin:3px;background:#e9ecef;color:#495057;border-radius:20px;font-size:0.85em;">
                #{{ . }}
              </span>
              {{ end }}
            </div>
            {{ end }}

            {{- /* Action button */ -}}
            {{ with .Params.original_url }}
            <div style="margin:20px 0;">
              <a href="{{ . }}" style="display:inline-block;padding:12px 24px;background:#667eea;color:#fff;text-decoration:none;border-radius:8px;font-weight:600;transition:background 0.2s;">
                ðŸ“– Read Full Article â†’
              </a>
            </div>
            {{ end }}

            {{- /* Metadata footer */ -}}
            <div style="margin-top:20px;padding-top:15px;border-top:1px solid #eee;font-size:0.85em;color:#888;">
              <span>Saved on {{ .Date.Format "January 2, 2006" }}</span>
              <span style="margin-left:15px;">
                <a href="{{ .Permalink }}" style="color:#667eea;">View on {{ $.Site.Title }}</a>
              </span>
            </div>
            </article>
            <img src="https://tinylytics.app/pixel/WV5Khk7ZG6MZe6q49ikx.gif" alt="" width="1" height="1" />
        ]]></content:encoded>
        </item>
    {{ end }}
  </channel>
</rss>
