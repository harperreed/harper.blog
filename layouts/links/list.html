{{/* layouts/links/list.html */}}
{{ define "main" }}
<div>
    <h1 class="text-3xl font-normal mb-12">Links</h1>

    {{ $paginator := .Paginate .Pages 50 }}
    {{ $prevDate := "" }}
    
    <div class="space-y-24">
        {{ range $paginator.Pages }}
            {{ $currentDate := .Date.Format "Monday, January 2, 2006" }}
            
            {{ if ne $currentDate $prevDate }}
                {{ if ne $prevDate "" }}
                    </div> <!-- Close previous links group -->
                {{ end }}
                
                <section>
                    <h2 class="text-2xl mb-8">{{ $currentDate }}</h2>
                    <div class="space-y-6">
                {{ $prevDate = $currentDate }}
            {{ end }}
            
            <article class="group">
                <a href="{{ .Params.original_url }}" 
                   class="block no-underline group-hover:text-gray-600" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    <div class="prose prose-lg prose-neutral max-w-none">
                        {{ .Content }}
                        <span class="text-base text-gray-600 group-hover:text-gray-900">
                            {{ with .Params.original_url }}
                            {{ $url := urls.Parse . }}
                            ({{ $url.Host }})
                            {{ end }}
                        </span>
                    </div>
                </a>
            </article>
        {{ end }}
        </div> <!-- Close last links group -->
    </div>

    {{ if gt $paginator.TotalPages 1 }}
    <nav class="mt-20 flex justify-between text-lg text-gray-600">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="hover:text-gray-900 no-underline">← Newer links</a>
        {{ end }}
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="hover:text-gray-900 no-underline">Older links →</a>
        {{ end }}
    </nav>
    {{ end }}
</div>
{{ end }}
