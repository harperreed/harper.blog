{{/* layouts/links/list.html */}}
{{ define "main" }}
<div>
    <h1 class="text-4xl font-normal mb-12">Links</h1>

    {{ $paginator := .Paginate .Pages 30 }}
    {{ $currentDate := "" }}
    
    <div class="space-y-16">
        {{ range $paginator.Pages }}
            {{ $postDate := .Date.Format "January 2, 2006" }}
            {{ if ne $currentDate $postDate }}
                {{ if ne $currentDate "" }}
                    </div>
                {{ end }}
                <h2 class="text-2xl font-normal mt-16 mb-6 text-gray-600">{{ $postDate }}</h2>
                <div class="space-y-6">
                {{ $currentDate = $postDate }}
            {{ end }}
            
            <article class="group">
                <a href="{{ .Params.original_url }}" class="no-underline" target="_blank" rel="noopener noreferrer">
                    <div class="prose prose-neutral max-w-none">
                        {{ .Content }}
                    </div>
                    <div class="text-lg text-gray-500 group-hover:text-gray-700 mt-2">
                        {{ with .Params.original_url }}
                        {{ $url := urls.Parse . }}
                        {{ $url.Host }}
                        {{ end }}
                    </div>
                </a>
            </article>
        {{ end }}
        </div>
    </div>

    {{ if gt $paginator.TotalPages 1 }}
    <nav class="mt-20 flex justify-between text-lg text-gray-600">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="hover:text-gray-900">← Newer links</a>
        {{ end }}
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="hover:text-gray-900">Older links →</a>
        {{ end }}
    </nav>
    {{ end }}
</div>
{{ end }}
