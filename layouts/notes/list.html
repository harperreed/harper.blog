{{- define "main" }}
<h1 class="page-title">Notes</h1>
{{ .Content }}
<ul class="posts flat">
    {{- $paginator := .Paginate .Data.Pages .Site.Params.notes_pagination }} {{-
    range $paginator.Pages }} {{- if (in .Site.Params.excludedTypes .Type) }}
    {{- else }}
    <li class="post">
        <div class="post-header">
            <div class="meta">
                <div class="date">
                    <span class="day">{{ dateFormat "02" .Date }}</span>
                    <span class="rest"
                        >{{ if $.Site.Data.month }}{{ index $.Site.Data.month
                        (printf "%d" .Date.Month) }} {{ .Date.Year }}{{ else
                        }}{{ dateFormat "Jan 2006" .Date }}{{ end }}</span
                    >
                </div>
            </div>
            <div class="matter">
                <article>
                    <h3 class="title small">{{.Title}}</h3>

                    <div class="note-content">{{ .Content }}</div>
                    {{- $postLink := .RelPermalink }} {{- with .Resources.ByType
                    "image" }}
                    <div class="note-images">
                        {{- range . }} {{- $thumbnail := .Resize "300x" }}
                        <a href="{{ $postLink }}" target="_blank">
                            <img
                                src="{{ $thumbnail.RelPermalink }}"
                                alt="{{ .Title }}"
                            />
                        </a>
                        {{- end }}
                    </div>
                    {{- end }}
                    <a
                        href="{{ .RelPermalink }}"
                        class="note-permalink"
                        title="Permalink to this note"
                        >#</a
                    >
                </article>
            </div>
        </div>
    </li>
    {{- end }} {{- end }}
</ul>
{{- partial "paginator.html" . }} {{- end }}
