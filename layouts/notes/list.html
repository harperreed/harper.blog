{{/* layouts/notes/list.html */}}
{{ define "main" }}
<div>
    <h1 class="text-3xl font-normal mb-12">Notes</h1>
    
    {{ $paginator := .Paginate .Pages 12 }}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        {{ range $paginator.Pages }}
        <article class="group">
            {{ with .Resources.ByType "image" }}
                {{ range first 1 . }}
                    {{ $image := .Resize "800x webp" }}
                    <div class="aspect-[3/2] mb-4 overflow-hidden">
                        <img 
                            src="{{ $image.RelPermalink }}" 
                            alt="{{ with .Title }}{{ . }}{{ else }}Note image{{ end }}"
                            class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                            loading="lazy"
                            width="{{ $image.Width }}"
                            height="{{ $image.Height }}"
                        />
                    </div>
                {{ end }}
            {{ end }}
            
            <a href="{{ .Permalink }}" class="no-underline block group-hover:text-gray-600">
                <div class="space-y-3">
                    <time class="block text-gray-600 text-base" datetime="{{ .Date.Format "2006-01-02" }}">
                        {{ .Date.Format "January 2, 2006" }}
                    </time>
                    
                    <div class="prose prose-neutral max-w-none">
                        {{ .Content }}
                    </div>

                    {{ with .Params.tags }}
                    <div class="flex flex-wrap gap-2 pt-2">
                        {{ range . }}
                        <span class="text-gray-600 text-base">#{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </a>
        </article>
        {{ end }}
    </div>

    {{ if gt $paginator.TotalPages 1 }}
    <nav class="mt-20 flex justify-between text-lg text-gray-600">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="hover:text-gray-900 no-underline">← Newer notes</a>
        {{ end }}
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="hover:text-gray-900 no-underline">Older notes →</a>
        {{ end }}
    </nav>
    {{ end }}
</div>
{{ end }}
