{{/* ABOUTME: Generates JSON-LD Person structured data for author/site owner. */}}
{{/* ABOUTME: Helps search engines understand the site's authorship and creator. */}}

{{- $author := .Site.Params.author.name | default .Site.Author.name | default "Harper Reed" -}}
{{- $email := .Site.Params.author.email | default .Site.Params.email | default "harper@modest.com" -}}
{{- $avatar := .Site.Params.avatar | default "https://s.gravatar.com/avatar/b7a96b3d5b5cfed5228396104cd67b38?s=400" -}}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": {{ $author | jsonify }},
  "url": {{ .Site.BaseURL | jsonify }},
  "image": {{ $avatar | jsonify }},
  "email": {{ $email | jsonify }},
  "jobTitle": "Technologist",
  "description": {{ .Site.Params.description | default "Musing from a normal person doing normal things" | jsonify }},
  "sameAs": [
    {{- $social := slice -}}
    {{- range .Site.Params.social -}}
      {{- $social = $social | append .url -}}
    {{- end -}}
    {{- range $i, $url := $social -}}
      {{- $url | jsonify -}}{{- if lt $i (sub (len $social) 1) -}},{{ end -}}
    {{- end -}}
  ]
}
</script>
