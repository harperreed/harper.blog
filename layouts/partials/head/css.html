 {{ with .Site.Params.customcss }} 
 {{- $concatStyles := slice -}}
 {{- range . -}} 
     {{ with (resources.Get .) }}
        {{ $concatStyles = $concatStyles | append . }}
     {{ else }}
        {{ warnf "Missing CSS resource: %s" . }}
     {{ end }}
 {{- end -}}
{{ $bundle := $concatStyles | resources.Concat "css/bundle.css" }}
{{ if hugo.IsProduction }}
    {{ $bundle = $bundle | minify | resources.Fingerprint "sha512" }}
{{ else }}
    {{ $bundle = $bundle | resources.ExecuteAsTemplate "css/bundle.css" . | resources.Fingerprint "sha512" }}
{{ end }}
    <link
        rel="preload"
        href="{{ $bundle.RelPermalink }}"
        as="style"
    />
    <link
        href="{{ $bundle.RelPermalink }}"
        integrity="{{ $bundle.Data.Integrity }}"
        rel="stylesheet"
    />
 {{ end }}

{{/* Hugo syntax highlighting CSS */}}
{{ $syntaxCSS := hugo.HighlightCSS "monokai" }}
{{ $syntax := resources.FromString "css/syntax.css" $syntaxCSS }}
{{ if hugo.IsProduction }}
    {{ $syntax = $syntax | minify | resources.Fingerprint "sha512" }}
{{ else }}
    {{ $syntax = $syntax | resources.Fingerprint "sha512" }}
{{ end }}
<link
    rel="preload"
    href="{{ $syntax.RelPermalink }}"
    as="style"
/>
<link
    href="{{ $syntax.RelPermalink }}"
    integrity="{{ $syntax.Data.Integrity }}"
    rel="stylesheet"
/>