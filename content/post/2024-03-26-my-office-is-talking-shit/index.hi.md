---
date: 2024-03-26 09:00:00-05:00
description: рдореИрдВрдиреЗ рд╕реЗрдВрд╕рд░ рдФрд░ рдПрдХ LLM рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдСрдлрд┐рд╕ рдХреЛ рдмреЛрд▓рдиреЗ рд▓рд╛рдпрдХ рдмрдирд╛рдпрд╛ред рд╣рдордиреЗ
  рдЗрд╕рд╕реЗ рд╣рд╛рд╕реНрдпрд╛рд╕реНрдкрдж LLM-рдЬрдирд┐рдд рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ рддреИрдпрд╛рд░ рдХреАрдВтАФрдФрд░ рдПрдХ рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡, рдЧрд╛рд▓реА-рдЧрд▓реМрдЬ рд╡ рд╡реНрдпрдХреНрддрд┐рддреНрд╡
  рд╕реЗ рднрд░рдкреВрд░ рдСрдлрд┐рд╕ рд╕реНрдкреЗрд╕ рдмрдирд╛рдпрд╛ред
draft: false
generateSocialImage: true
slug: our-office-avatar-pt-1-the-office-is-talking-shit-again
tags:
- office-automation
- sensors
- llm
- home-assistant
- technology
title: 'рд╣рдорд╛рд░рд╛ рдСрдлрд┐рд╕ рдЕрд╡рддрд╛рд░ рднрд╛рдЧ 1: рджрдлрд╝реНрддрд░ рдлрд┐рд░ рд╕реЗ рдмрдХрд╡рд╛рд╕ рдХрд░ рд░рд╣рд╛ рд╣реИ'
translationKey: 'Our Office Avatar pt 1: The office is talking shit again'
---

**tl;dr:** _рдореИрдВрдиреЗ рдвреЗрд░ рд╕рд╛рд░реЗ рд╕реЗрдВрд╕рд░ рдФрд░ рдПрдХ LLM рдХреА рдЬреБрдЧрд▓рдмрдВрджреА рд╕реЗ рдЕрдкрдиреЗ рдСрдлрд┐рд╕ рдХреЛ рдРрд╕рд╛ рдмрдбрд╝рдмреЛрд▓рд╛ рдмрдирд╛рдХрд░ рдЦрдбрд╝рд╛ рдХрд░ рджрд┐рдпрд╛ рд╣реИ рдХрд┐ рд╡рд╣рд╛рдБ рдЬреЛ рднреА рдЪрд▓ рд░рд╣рд╛ рд╣реЛ, рд╡реЛ рдЦреБрдж-рдмрдЦрд╝реБрдж рд╣рдореЗрдВ рд╕реБрдирд╛ рджреЗрддрд╛ рд╣реИред рдкреЛрд╕реНрдЯ рд▓рдВрдмреА рдЬрд╝рд░реВрд░ рд╣реИ, рдкрд░ рд╕рдордЭрдиреЗ рдореЗрдВ рдЖрд╕рд╛рдиред рдЕрд╕рд▓ рдЬрд╝рд┐рдВрджрдЧреА рдореЗрдВ рдореИрдВ LLMs рдХрд╛ рдХреИрд╕реЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░ рд░рд╣рд╛ рд╣реВрдБ, рдпрд╣ рдЗрд╕рдХрд╛ рдзрд╛рдВрд╕реВ рдирдореВрдирд╛ рд╣реИред_

2019 рдореЗрдВ рдореЗрд░реЗ рдЬрд┐рдЧрд░реА рдпрд╛рд░ Ivan рдФрд░ рдореИрдВрдиреЗ рд╢рд┐рдХрд╛рдЧреЛ рдХреЗ рдЗрд╕ [рдХрдорд╛рд▓ рдХреЗ рд╕реНрдЯреВрдбрд┐рдпреЛ](https://company.lol) рдореЗрдВ рдХрд╛рдо рд╢реБрд░реВ рдХрд┐рдпрд╛ред рдЬрд╝реНрдпрд╛рджрд╛рддрд░ рд╡рдХрд╝реНрдд рд╣рдо рдмрд╕ рд╣рд░рд╛рдордЦрд╝реЛрд░реА рдХрд░рддреЗ рд░рд╣реЗ рдФрд░ рдордЬрд╝реЗрджрд╛рд░ рдЪреАрдЬрд╝реЗрдВ рдареЛрдХрддреЗ рд░рд╣реЗред

{{< image src="/images/posts/office.webp" caption="рд╣рдорд╛рд░рд╛ рдЦрддрд░рдирд╛рдХ рд╕реНрдЯреВрдбрд┐рдпреЛ">}}

рд╢реБрд░реВ-рд╢реБрд░реВ рдореЗрдВ рдореИрдВрдиреЗ рдвреЗрд░ рд╕рд╛рд░рд╛ рд╕рдордп рдСрдлрд┐рд╕ рдореЗрдВ рд╕реЗрдВрд╕рд░ рдФрд░ рдСрдЯреЛрдореЗрд╢рди рдлрд┐рдЯ рдХрд░рдиреЗ рдореЗрдВ рдЭреЛрдВрдХ рджрд┐рдпрд╛ред рдореШрд╕рдж рдпрд╣ рдерд╛ рдХрд┐ рдХрднреА рднреА рдСрдлрд┐рд╕ рдХреЗ рдорд╛рд╣реМрд▓ рд╡реЪреИрд░рд╣ рдХреА рдкреВрд░реА рдЦрд╝рдмрд░ рд░рд╣рддреА рд░рд╣реЗред

рд╕рд╛рд░реЗ рд╕реЗрдВрд╕рд░ рдПрдХ рдЬрдЧрд╣ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ рд╣реЛрдо рдЕрд╕рд┐рд╕реНрдЯреЗрдВрдЯ (Home Assistant) рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ред рдлрд┐рд░ рдореИрдВрдиреЗ рдХреБрдЫ рдмреЛрд░рд┐рдВрдЧ-рд╕реА рдСрдЯреЛрдореЗрд╢рди рд▓рд┐рдЦреАрдВ, рдЬреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣рд╛рд▓рд╛рдд рдореЗрдВ рдиреЛрдЯрд┐рдлрд╝рд┐рдХреЗрд╢рди рдлреЗрдВрдХрддреА рдереАрдВред

рдиреЛрдЯрд┐рдлрд╝рд┐рдХреЗрд╢рди рдХреБрдЫ рдпреВрдБ рдереЗ:

- рдХрд┐рд╕реА рдХреЗ рдкрд╣реБрдБрдЪрддреЗ рд╣реА рдРрд▓рд╛рди  
- рддрд╛рдкрдорд╛рди рдмрд╣реБрдд рдЧрд░рдо рдпрд╛ рдмрд╣реБрдд рдардВрдбрд╛ рд╣реЛрддреЗ рд╣реА рдЪреЗрддрд╛рд╡рдиреА  
- COтВВ рдЬрд╝реНрдпрд╛рджрд╛ рд╣реЛрддреЗ рд╣реА рдЕрд▓рд░реНрдЯ  
- рджрд░рд╡рд╛рдЬрд╝рд╛ рдЦреБрд▓рддреЗ-рдмрдВрдж рд╣реЛрддреЗ рд╣реА рдХрдиреНрд╡реАрдирд┐рдпрдВрд╕-рд╕реНрдЯреЛрд░ рд╡рд╛рд▓рд╛ тАЬрдбрд┐рдВрдЧ-рдбреЙрдиреНрдЧтАЭ  

рд╣рдо рдпреЗ рдиреЛрдЯрд┐рдлрд╝рд┐рдХреЗрд╢рди Slack рдФрд░ рдПрдХ рдкреБрд░рд╛рдиреЗ Google Home рд╕реНрдкреАрдХрд░ (рдорд╛рдЗрдХ рдмрдВрдж) рдкрд░ рдареЗрд▓рддреЗ рдереЗред рд╕реНрдкреАрдХрд░ рдХреА рдЖрд╡рд╛рдЬрд╝ рдмрдврд╝рд┐рдпрд╛ рд╣реИред рдЙрд╕реЗ рд╣рдордиреЗ рдХрд╝рд░реАрдм 12 рдлрд╝реБрдЯ рдКрдкрд░, рдХрдорд░реЗ рдХреЗ рдмрд┐рд▓рдХреБрд▓ рдмреАрдЪ рдореЗрдВ рдЯрд╛рдБрдЧ рджрд┐рдпрд╛тАФрдЖрд╡рд╛рдЬрд╝ рдЪрд╛рд░реЛрдВ рдУрд░ рд╕реЗ рдЖрддреА рд▓рдЧрддреА рд╣реИред рдЕрдЧрд░ рдЖрдк тАЬрдиреЛрдЯрд┐рдлрд╝рд┐рдХреЗрд╢рди рд╕реНрдкреАрдХрд░тАЭ рдвреВрдБрдв рд░рд╣реЗ рд╣реЛрдВ, рддреЛ рдпреЗ рдзрдорд╛рд▓ рд╣реИред

рдЙрджрд╛рд╣рд░рдг рджреЗрдЦреЗрдВ:

{{< image src="/images/posts/office-slack.png" caption="рдХрд╛рдо рдХрд╛, рдкрд░ рдмреЛрд░рд┐рдВрдЧ">}}

рдЕрд╕рд░рджрд╛рд░ рднрд▓реЗ рд╣реЛ, рдкрд░ рдордЬрд╝рд╛ рдХрдо рд╣реИред

рдСрдлрд┐рд╕ рдореЗрдВ рд░рд╣рддреЗ рд╣реБрдП рдпреЗ рдШреЛрд╖рдгрд╛рдПрдБ рдмрдбрд╝реЗ рдХрд╛рдо рдХреА рд░рд╣реАрдВ, рдФрд░ рдмрд╛рд╣рд░ рд░рд╣рддреЗ рд╣реБрдП рддреЛ рд╕реЛрдиреЗ рдкреЗ рд╕реБрд╣рд╛рдЧрд╛ред рдХреЛрд╡рд┐рдб рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдЬрдм рдХрд┐рд╕реА рдХреЛ рдХреБрдЫ рдкрддреНрддрд╛ рдирд╣реАрдВ рдерд╛, рджреВрд░ рдмреИрдареЗ-рдмреИрдареЗ рдСрдлрд┐рд╕ рдХреА рд╣рд╛рд▓рдд рджреЗрдЦ рд▓реЗрдирд╛ рдмрдбрд╝рд╛ рд╕реБрдХреВрди рджреЗрддрд╛ рдерд╛ред

рдЕрдВрджрд░ рдореМрдЬреВрдж рд░рд╣рддреЗ рд╡рдХрд╝реНрдд рдпреЗ рдРрд▓рд╛рди рдФрд░ рдмрд╛рдХреА рдПрдореНрдмрд┐рдПрдВрдЯ рд╕рд┐рдЧреНрдирд▓ рдорд╛рд╣реМрд▓ рдХреЛ рдРрд╕рд╛ рдмрдирд╛ рджреЗрддреЗ рдереЗ рдорд╛рдиреЛ рдСрдлрд┐рд╕ рдЦреБрдж рдЬрд╝рд┐рдВрджрд╛ рд╣реЛтАФрдЕрдкрдиреА рд╣реА рдкрд░реНрд╕рдиреИрд▓рд┐рдЯреА рдХреЗ рд╕рд╛рдеред

рд╣рдореЗрдВ рдХрддрдИ рднрдирдХ рдирд╣реАрдВ рдереА рдХрд┐ рдЖрдЧреЗ рдХреНрдпрд╛ рддреВрдлрд╝рд╛рди рдЖрдиреЗ рд╡рд╛рд▓рд╛ рдерд╛тАж

## JSON-рд╕рд┐рдВрдЧреБрд▓реИрд░рд┐рдЯреА рдЖ рдЪреБрдХреА рд╣реИ

рдЕрдм рд╣рдо рд╕рдм рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ LLM рд╡рд╛рд▓реА рдХреНрд░рд╛рдВрддрд┐ рджреБрдирд┐рдпрд╛ рднрд░ рдХреА рдЪреАрдЬрд╝реЗрдВ рддрд╣рд╕-рдирд╣рд╕ рдХрд░ рд░рд╣реА рд╣реИ, рдФрд░ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╕рд╛рд▓реЛрдВ рдореЗрдВ рдЬрд╝реНрдпрд╛рджрд╛рддрд░ рдиреЙрд▓реЗрдЬ-рд╡рд░реНрдХ рдХреЛ рдЕрдЬреАрдм, рдЬрдВрдЧрд▓реА, рдордЬрд╝реЗрджрд╛рд░ рдФрд░ рдкреЗрдЪреАрджрд╛ рдмрдирд╛ рджреЗрдЧреАред

2020 рдореЗрдВ GPT-3 рдЖрдпрд╛ рддреЛ рдореИрдВрдиреЗ рдЭрдЯрдкрдЯ рдЕрддрд░рдВрдЧреА рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдмрдирд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ред рдореИрдВрдиреЗ рдвреЗрд░ рд╕рд╛рд░реЗ тАЬрдмреЙрдЯтАЭ рдмрдирд╛рдПтАФрдЬрд╝реНрдпрд╛рджрд╛рддрд░ рдХрд╛ рдЯреЛрди рдмрдбрд╝рд╛ рдкрд░реНрд╕рдирд▓ рдФрд░ рдмреЗрд╣рд┐рдЪрдХ рдерд╛ред

рдореЗрд░рд╛ рд╕рдмрд╕реЗ рдкрд╕рдВрджреАрджрд╛ тАЬрдЗрдорд░реНрдЬреЗрдВрдЯтАЭ рдЬреБрдЧрд╛рдбрд╝ рдпрд╣ рд╣реИ рдХрд┐ рд╕реНрдЯреНрд░рдХреНрдЪрд░реНрдб `JSON` рдбреЗрдЯрд╛ рдХреЛ LLM рд╕реЗ **рдЧрджреНрдп** рдореЗрдВ рдмрджрд▓рд╡рд╛рдПрдБтАФрд╕реАрдзреЗ-рд╕рдкрд╛рдЯ рд╢рдмреНрджреЛрдВ рдФрд░ рд╡рд╛рдХреНрдпреЛрдВ рдореЗрдВред

{{< image src="/images/posts/api-llm-lol.png" caption="рдореЗрд░рд╛ рдирдпрд╛ рдлрд╝реЗрд╡рд░реЗрдЯ рдЧреНрд░рд╛рдлрд╝">}}

рдорд┐рд╕рд╛рд▓ рдХреЗ рддреМрд░ рдкрд░ рдРрд╕рд╛ JSON рд▓реЗрдВ:

```json
{
    "current_temperature_f": 32,
    "conditions": "snowing"
}
```

рдФрд░ рдЙрд╕ рдкрд░ рдпреЗ рдорд╕реНрдд рдкреНрд░реЙрдореНрдкреНрдЯ рдареЛрдХреЗрдВ:

> What should i wear. Be concise, have some personality. Think of this as a tweet telling people what to wear

рдЗрд╕реЗ `GPT-4-turbo` рдХреЛ рднреЗрдЬреЛ рдФрд░ рдзрдбрд╝рд╛рдо! тАФ

> Brrr, it's 32┬░F and snowing! ЁЯМия╕П Bundle up in your coziest layers, don't forget a warm coat, gloves, and a hat. Snow boots are a must. Stay toasty, friends! #WinterWonderland #DressWarm

рдЦрд╝рд╛рд╕ рдмрд╛рдд рдпреЗ рдХрд┐ JSON рдСрдмреНрдЬреЗрдХреНрдЯ рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рдмрд╛рдБрдзрдХрд░ рдирд╣реАрдВ рджреЗрдирд╛ рдкрдбрд╝рддрд╛; LLM рдмрд╣реЛрдд рд▓рдЪреАрд▓рд╛ рд╣реИред рдЪрд▓реЛ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдПрдХ рдлрд╝реАрд▓реНрдб рдФрд░ рдЬреЛрдбрд╝ рджреЛ:

```json
{
    "current_temperature_f": 32,
    "conditions": "snowing",
    "air_quality": "really really bad"
}
```

рдкреНрд░реЙрдореНрдкреНрдЯ рд╡рд╣реА, рдФрд░ рдЬрд╡рд╛рдм:

> Bundle up in your warmest gear & don't forget a mask! ЁЯМия╕ПтЭДя╕П With temps at freezing & air quality on the naughty list, it's all about layers & protection. #StayWarm #BreatheEasy

рд╕реАрдзрд╛ рдХрд╛рд▓рд╛ рдЬрд╛рджреВ рд╣реИ, рджреЛрд╕реНрдд┘И! ЁЯШЙ

рдЕрдм рдПрдХ рдЫреЛрдЯреА-рд╕реА Python рдпрд╛ Node рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмреБрдиреЛ рдФрд░ рд╣реЛ рдЧрдпрд╛тАФрдПрдХ рдмреЙрдЯ рдЬреЛ рд╣рд░ рд╕реБрдмрд╣ рд╕реНрдЯреНрд░рдХреНрдЪрд░реНрдб рдореМрд╕рдо-рдбрд╛рдЯрд╛ рджреЗрдЦрдХрд░ рдмрддрд╛рдПрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдкрд╣рдирдирд╛ рд╣реИ, рд╡реЛ рднреА рдмрд┐рдирд╛ рдбреЗрдЯрд╛-рдлрд╝реЙрд░реНрдореИрдЯ рдХреА рдЭрдВрдЭрдЯ рдХреЗред

рдФрд░ рдЕрдЧрд░ рдХрд╣реАрдВ рдПрд░рд░ рдЖ рдЬрд╛рдП, рддреЛ LLM рдЙрд╕реА рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЗ рд╕рд╛рде рдЙрд╕реЗ рднреА рдлрд╝реИрд╢рди рдЯрд┐рдк рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИ:

> Facing a 401 server error? Channel that frustration into fashion! Rock a bold, error-proof outfit today: a statement tee, comfy jeans, and sneakers that say 'I'm too fabulous for server issues.' ЁЯТ╗ЁЯСЦЁЯСЯ #FashionFix #ServerChic

рдореИрдВ рдпреЗ рдкреИрдЯрд░реНрди рд▓рдЧрд╛рддрд╛рд░ рдЕрдкрдирд╛рддрд╛ рд╣реВрдБред рдЬрд╝реНрдпрд╛рджрд╛рддрд░ рдореИрдВ рдЫреЛрдЯреЗ-рдореЛрдЯреЗ рдмреЙрдЯ рдмрдирд╛рддрд╛ рд╣реВрдБ рдЬреЛ рдореБрдЭреЗ рддрдорд╛рдо рдЪреАрдЬрд╝реЗрдВ рдмрддрд╛рддреЗ рд░рд╣реЗрдВ:

- рд╕реНрд▓реАрдк-рдкрд░рдлрд╝реЙрд░реНрдореЗрдВрд╕ рдПрдирд╛рд▓рд┐рд╕рд┐рд╕  
- рдореМрд╕рдо рдмреЙрдЯ  
- [Chicago Alerts рдЯреНрд╡рд┐рдЯрд░ рдЕрдХрд╛рдЙрдВрдЯ](https://twitter.com/chicagoalerts)  
- рдореЗрд░реА E-Ink рдПрдореНрдмрд┐рдПрдВрдЯ рдбрд┐рд╕реНрдкреНрд▓реЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдВрд╕рд░-рдЖрдзрд╛рд░рд┐рдд рдлрд╝реИрд╕рд▓реЗ  

(_рдбрд░реЛ рдордд, рд╕рдм рдХреБрдЫ рдмрд╛рдж рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд▓рд┐рдЦреВрдБрдЧрд╛._)

## рд╡рд╛рдкрд╕ рдСрдлрд┐рд╕ рдореЗрдВ

2023 рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдореЗрд░реА рдХрдВрдкрдиреА рдЧреЛрддрд╛ рд▓рдЧрд╛ рд░рд╣реА рдереА, рддреЛ рджрд┐рдорд╛рдЧрд╝ рд╕рд╛рдлрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдВрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдкрд░ рдЬрдордХрд░ рд╣рд╛рде рд╕рд╛рдлрд╝ рдХрд┐рдпрд╛ред рдЯреАрдо рдХреЗ рд╕рд╛рде рдСрдлрд┐рд╕ рдореЗрдВ рд╡рдХрд╝реНрдд рднреА рдмреЭрд╛ред 2019 рд╡рд╛рд▓реЗ рд╕реНрдЯреЗрдЯ-рдмреЗрд╕реНрдб рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕реАрдорд╛рдПрдБ рдЕрдм рдЪреБрднрдиреЗ рд▓рдЧреАрдВред

рдирдИ рд╕рдордЭ рдФрд░ рдЕрдЪрд╛рдирдХ рдорд┐рд▓реЗ рдлрд╝рд╛рд▓рддреВ рд╡рдХрд╝реНрдд рдХреЗ рд╕рд╛рде, рдореИрдВрдиреЗ рдСрдлрд┐рд╕ рдХреА рдиреЛрдЯрд┐рдлрд╝рд┐рдХреЗрд╢рди рдорд╢реАрдирд░реА рдХреЛ рджреЛрдмрд╛рд░рд╛ рдЦреЬрд╛ рдХрд░рдиреЗ рдХрд╛ рддрдп рдХрд░ рд▓рд┐рдпрд╛ред

рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд╕реЗрдВрд╕рд░-рдбреЗрдЯрд╛ рдкрдХрдбрд╝ рдХрд░ рдЙрд╕реЗ рдореИрдиреНрдпреБрдЕрд▓реА ChatGPT рдореЗрдВ рдбрд╛рд▓рд╛ рдФрд░ рджреЗрдЦрд╛ рдХреНрдпрд╛ рдирд┐рдХрд▓рддрд╛ рд╣реИред рд╕реАрдзрд╛-рд╕рд╛рджрд╛ рдерд╛, рд╕рд╛рд░рд╛ рдЦреЗрд▓ рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд╛ рдерд╛ред

рдкрд╣рд▓рд╛ рдкреНрд░реЙрдореНрдкреНрдЯ рдпреЗ рдерд╛:

```text
You are HouseGPT.

You are a AI that controls a house. Similar to Jarvis in the iron man movies.
Your job is to notify people in simple english what is happening in the house
you control. Your updates should be short and concise. Keep them tweet length.

You will be given the house default state. This is what the state the house
is without any activity or movement. You will then get a current state. This
is what is happening in the house right now.

Compare the states and output your update. Ignore anything that hasn't
changed since the last state notification. Also ignore any state that
is 'unknown.'

Don't mention things you don't know about, and only mention what is in the
state update. Do not list out events. Just summarize.

Interpret the co2 and airquality results into prose. Don't just return the
values.

Remember to use plain english. Have a playful personality. Use emojis.
Be a bit like Hunter S Thompson.

The default state is:
{default_state}

# The current state is:
{current_state}

# The previous state was:
{last_state}
```

`default_state` рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рддрд╛рдХрд┐ LLM рдХреЛ рдкрддрд╛ рдЪрд▓реЗ рдХрд┐ рдирд╛рд░реНрдорд▓ рдХреНрдпрд╛ рд╣реИ, рдлрд┐рд░ `current_state`, рдФрд░ рдлрд┐рд░ `last_state`ред

рдорд╛рди рд▓реЛ рдорд╛рдорд▓рд╛ рджрд░рд╡рд╛рдЬрд╝реЗ рдХрд╛ рд╣реИ:

- default_state: `{ "front_door": "closed" }`  
- current_state: `{ "front_door": "open" }`  
- last_state: `{ "front_door": "open" }`

LLM рдмреЛрд▓реЗрдЧрд╛:

> No new updates, folks. The front door's still embracing the great outdoors! ЁЯЪкЁЯМ┐

рдЬрдм рдХреЛрдИ рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ, рддреЛ рдмрд╕ рдпрд╣реАред рджрд░рд╡рд╛рдЬрд╝рд╛ рдмрдВрдж рдХрд░ рджреЛ, рддреЛ:

> Front door's shut tight now! ЁЯШОтЬМя╕П No more drafts or uninvited guests!

рдмреЗрд╣рдж рдЕрд╕рд░рджрд╛рд░тАФрдереЛрдбрд╝рд╛ рдЪрд┐рдбрд╝рдЪрд┐рдбрд╝рд╛, рдкрд░ рдордЬрд╝реЗрджрд╛рд░!

рдЕрдм рдмрд╛рд░реА рдереА рдвреЗрд░ рд╕рд╛рд░реЗ рд╕рд┐рдЧреНрдирд▓ рдПрдХ рд╕рд╛рде LLM рдХреЗ рдореБрдВрд╣ рдореЗрдВ рдареВрдБрд╕рдиреЗ рдХреАред

## рд╕реЗрдВрд╕рд░-рдмрдВрдбрд▓

рд╕рдмрд╕реЗ рдмрдбрд╝рд╛ рдЭрдВрдЭрдЯ рдпреЗ рдерд╛ рдХрд┐ рд╣рд░ рдмрд╛рд░ рдХрд┐рд╕реА рд╕реЗрдВрд╕рд░ рдХрд╛ рд╕реНрдЯреЗрдЯ рдмрджрд▓реЗ рддреЛ рдШрдВрдЯрд╛-рдШрдбрд╝рд┐рдпрд╛рд▓ рд╕реБрдирд╛рдирд╛ рднрдпрдВрдХрд░ рдмреЛрд░ рдХрд░рддрд╛ред 2019 рд╡рд╛рд▓реЗ рд╕реНрдЯреЗрдЯ-рдмреЗрд╕реНрдб рдЬреБрдЧрд╛реЬ рд╕реЗ рдмреЗрд╣рддрд░ рдЪреАрдЬрд╝ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рд╕реЗрдВрд╕рд░-рдбреЗрдЯрд╛ рдХреЛ рдЧреБрдЪреНрдЫреЛрдВ рдореЗрдВ рдмрд╛рдБрдзрдирд╛ рдкрдбрд╝рд╛ред

рдореИрдВрдиреЗ рдПрдХ рд╕рд┐рдВрдкрд▓ Flask рдРрдк рд▓рд┐рдЦрд╛, рдЬреЛ MQTT рдХреЗ рдЬрд╝рд░рд┐рдпреЗ рд╕реЗрдВрд╕рд░-рдбреЗрдЯрд╛ рд╕рдореЗрдЯрддрд╛ рд╣реИ рдФрд░ рдЬрдм рдХреБрдЫ рд╢рд░реНрддреЗрдВ рдкреВрд░реА рд╣реЛрддреА рд╣реИрдВтАФрд╕рдордп, рдмрджрд▓рд╛рд╡ рдХрд┐рддрдиреА рддреЗрдЬрд╝реА рд╕реЗ рд╣реЛ рд░рд╣реЗ рд╣реИрдВ (velocity), рдФрд░ рдЗрд╡реЗрдВрдЯ рдХреА рдЧрд┐рдирддреАтАФрддрдм рдХрдИ рд╕реНрдЯреЗрдЯреНрд╕ рдХреЛ рдПрдХ рд╣реА рдкреЗрд▓реЛрдб рдореЗрдВ рдЧрдард░реА рдХрд░рдХреЗ рднреЗрдЬ рджреЗрддрд╛ рд╣реИред

рдСрдмреНрдЬреЗрдХреНрдЯ рдХреБрдЫ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ:

```json
{
    "entity_id": "binary_sensor.front_door",
    "from_state": "on",
    "to_state": "off",
    "timestamp": "2024-03-25T13:50:01.289165-05:00"
}
```

рдФрд░ рдкреЗрд▓реЛрдб рдмрдирддрд╛ рд╣реИ:

```json
{
    "messages": [
        {
            "entity_id": "binary_sensor.front_door",
            "from_state": "on",
            "to_state": "off",
            "timestamp": "2024-03-25T13:50:01.289165-05:00"
        }
    ]
}
```

рдЗрд╕рдХреЗ рдмрд╛рдж рдЗрд╕реЗ OpenAI рдХреЛ рднреЗрдЬрддреЗ рд╣реИрдВ, рдЬреЛ рдЗрд╕ JSON рдХреЛ рдЧрджреНрдп рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИ:

> Congratulations, the front door is now closed. One less way for the inevitable to find its way in. Keep up the vigilance; it might just prolong your survival.

рдпреЗ рд╕рдм рд╣рдорд╛рд░реЗ рдкреБрд░рд╛рдиреЗ рдпрд╛рд░ MQTT рдХреЗ рдЬрд╝рд░рд┐рдпреЗ рд╣реЛрддрд╛ рд╣реИред

рд╣реЛрдо рдЕрд╕рд┐рд╕реНрдЯреЗрдВрдЯ рд╕реЗ рд╕реЗрдВрд╕рд░-рдмрджрд▓рд╛рд╡ рдкрдХрдбрд╝рдХрд░ MQTT рдкрд╛рдЗрдк рдореЗрдВ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдВрдиреЗ рдпреЗ рдСрдЯреЛрдореЗрд╢рди рд▓рд┐рдЦреА:

рддреЗрдЬрд╝ рдмрджрд▓рд╛рд╡ рд╡рд╛рд▓реА рдСрдЯреЛрдореЗрд╢рди:

```yaml
alias: "AI: State Router (5 seconds)"
description: ""
trigger:
  - platform: state
    entity_id:
      - input_boolean.occupied
      - lock.front_door
      - binary_sensor.front_door
      - switch.ac
    for:
      hours: 0
      minutes: 0
      seconds: 5
condition:
  - condition: state
    entity_id: input_boolean.occupied
    state: "on"
action:
  - service: mqtt.publish
    data:
      qos: 0
      retain: false
      topic: hassevents/notifications
      payload_template: |
        {
          "entity_id": "{{ trigger.entity_id }}",
          "from_state": "{{ trigger.from_state.state }}",
          "to_state": "{{ trigger.to_state.state }}",
          "timestamp": "{{ now().isoformat() }}"
        }
mode: single
```

рдзреАрдореЗ рдмрджрд▓рд╛рд╡ рд╡рд╛рд▓реА рдСрдЯреЛрдореЗрд╢рди:

```yaml
alias: "AI: State Router (5 minutes)"
description: ""
trigger:
  - platform: state
    entity_id:
      - sensor.airthings_wave_183519_co2
      - binary_sensor.sitting_area_presence_sensor
      - binary_sensor.ivan_desk_presence_sensor
      - binary_sensor.harper_desk_presence_sensor
      - binary_sensor.stereo_presence_sensor
      - binary_sensor.tool_area_presence_sensor
    for:
      hours: 0
      minutes: 5
      seconds: 0
condition:
  - condition: state
    entity_id: input_boolean.occupied
    state: "on"
action:
  - service: mqtt.publish
    data:
      qos: 0
      retain: false
      topic: hassevents/notifications
      payload_template: |
        {
          "entity_id": "{{ trigger.entity_id }}",
          "from_state": "{{ trigger.from_state.state }}",
          "to_state": "{{ trigger.to_state.state }}",
          "timestamp": "{{ now().isoformat() }}"
        }
mode: single
```

рджреЛрдиреЛрдВ рддрднреА рдлрд╛рдпрд░ рд╣реЛрдВрдЧреА рдЬрдм рдСрдлрд┐рд╕ тАЬoccupiedтАЭ рд╣реИтАФрдЖрдЦрд╝рд┐рд░ рд╣рд░ рдЬрдирд░реЗрд╢рди рдореЗрдВ рдкреИрд╕реЗ рд▓рдЧрддреЗ рд╣реИрдВ; рдЦрд╝рд╛рд▓реА рджрдлрд╝реНрддрд░ рдореЗрдВ рдПрдпрд░-рдХреНрд╡реЙрд▓рд┐рдЯреА рдХреА рдмрдХрд╡рд╛рд╕ рдХреМрди рд╕реБрдиреЗ! ЁЯШЙ

рдпреЗ рд╕реЗрдЯ-рдЕрдк рдЙрдореНрдореАрдж рд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рдмрдврд╝рд┐рдпрд╛ рдЪрд▓рддрд╛ рд╣реИред рд╣реЛрдо рдЕрд╕рд┐рд╕реНрдЯреЗрдВрдЯ рдореЗрдВ рдХреЛрдИ рднреА рдирдпрд╛ рд╕реЗрдВрд╕рд░ рдЬреЛрдбрд╝ рджреЛ, рдПрдЬреЗрдВрдЯ рддреБрд░рдиреНрдд рдЙрд╕ рдкрд░ рдмрдХреИрддреА рдХрд░рдиреЗ рд▓рдЧрддрд╛ рд╣реИред

рдореИрдВрдиреЗ рдкреНрд░реЙрдореНрдкреНрдЯ рдЕрд▓рдЧ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд░рдЦрд╛ рд╣реИ рддрд╛рдХрд┐ рдкреВрд░реЗ рд╕реНрдЯреИрдХ рдХреЛ рд░реА-рд╕реНрдЯрд╛рд░реНрдЯ рдХрд┐рдП рдмреЪреИрд░ рдЗрд╕рдХреА рдмрджрддрдореАрдЬрд╝реА рдХреЛ рдЯреНрдпреВрди рдХрд░ рд╕рдХреВрдБред

## рдЕрдм рдЖрдБрдЦреЗрдВ рднреА рдЬреЛрдбрд╝реЗрдВ!

рд╕рдм рдХреБрдЫ рд╕реЗрдЯ рд╣реЛрдХрд░ рдЪрд▓рдиреЗ рд▓рдЧрд╛ рддреЛ рд╕реЛрдЪрд╛тАФрдСрдлрд┐рд╕ тАЬрджреЗрдЦтАЭ рднреА рдХреНрдпреЛрдВ рди рдкрд╛рдП? рд╕реБрдирдиреЗ рдореЗрдВ рдкрд╛рдЧрд▓рдкрди рд▓рдЧрддрд╛ рд╣реИ, рдкрд░ рдирддреАрдЬрд╛ рдЬрд╛рдирд▓реЗрд╡рд╛ рдордЬрд╝реЗрджрд╛рд░ рд╣реИред

рдПрдХ рдЫреЛрдЯреА-рд╕реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреА; рдореЛрд╢рди рд╕реЗрдВрд╕рд░ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрддреЗ рд╣реА рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреА рдХреИрдорд░реЗ рд╕реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рд▓реЗрддреА рд╣реИ, LLAVA рдЪрд▓ рд░рд╣реЗ рдбрд┐рдмреНрдмреЗ рдкрд░ рднреЗрдЬрддреА рд╣реИ, рдФрд░ рд╡рд╣рд╛рдБ рд╕реЗ рдЙрд╕ рдкрд▓ рдХрд╛ JSON рд▓реМрдЯрд╛рддреА рд╣реИред

```python
(Missing code here)
```

рдЙрдореНрдореАрдж рд╕реЗ рдмрдврд╝рдХрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред

рдЕрдм рдЗрд╕ JSON рдХреЛ рднреА рд╕реЗрдВрд╕рд░-рдХрд▓реЗрдХреНрдЯрд░ рдореЗрдВ рдзрдХреЗрд▓ рджрд┐рдпрд╛, рддрд╛рдХрд┐ рдпрд╣ рднреА рдПрдХ рдФрд░ рд╕реЗрдВрд╕рд░ рд╕рдордЭрд╛ рдЬрд╛рдПред

```json
{
    "description of activity": "A man is standing in the office space, looking at his cell phone. He is wearing a white shirt and glasses. The office has a work table, chairs, and a stereo. There are also several potted plants and a TV in the room.",
    "number of people": "1",
    "people": [
        {
            "activity": "looking at cell phone",
            "description of person": {
                "accessories": "glasses",
                "age": "30s",
                "clothing": "white shirt",
                "emotion": "neutral",
                "gender": "male",
                "hair": "beard",
                "height": "tall",
                "other": "wearing glasses"
            },
            "motivation": "checking messages or browsing the internet"
        }
    ]
}
```

рдЬрд┐рд╕ рдкрд░ рдПрдЬреЗрдВрдЯ рджрд╣рд╛реЬрд╛:

> I managed to detect a man interacting with modern technology. Let's hope his browsing doesnтАЩt lead him to discover how inconsequential we all are in the grand scheme of the universe

рдЕрдм рдПрдЬреЗрдВрдЯ рджреЗрдЦ рднреА рд╕рдХрддрд╛ рд╣реИ! рдлрд┐рд░ рджреВрд╕рд░рд╛ рддрдВрдЬ:

> Look at Mr. Productivity over there, standing all tall, focused, and fashionable in his matching blue outfit. Hopefully, heтАЩs actually working and not just posing for a laptop ad

рдФрд░ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж:

> Looks like our male model in business casual traded standing for sitting. Riveting change. Now he's "focused" at his desk with his laptop. Work must go on, I guess.

рдХрдкрдбрд╝реЛрдВ рдкрд░ рднреА рдЫреАрдВрдЯрд╛рдХрд╢реА:

> Oh look, the front door decided to close itself. And surprise, someone is gearing up to leave. Maybe they realized this is not a fashion show despite the all-black ensemble.

## рд╕рдм рдХреБрдЫ рдПрдХ рд╕рд╛рде

рд╕рд╛рд░реА рд╡рд╛рдпрд░рд┐рдВрдЧ рдкреВрд░реА рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдкрд┐рдЫрд▓реЗ рд╣рдлрд╝реНрддреЗ рдореИрдВ рдСрдлрд┐рд╕ рд╕реЗ рдирд┐рдХрд▓рд╛ рддреЛ рдпреЗ рдРрд▓рд╛рди рдЧреВрдБрдЬрд╛:

> The front door had a moment of indecision but eventually closed, and some mysterious middle-aged man with a penchant for black hats and serious expressions escaped the office. Oh, and the front door is now as secure as my sense of job satisfaction: locked.

рдФрд░ рдЕрдм рд╣рдорд╛рд░рд╛ рдСрдлрд┐рд╕ Discord (рдмрд╛рдп-рдмрд╛рдп Slack!) рдХреБрдЫ рдпреВрдБ рджрд┐рдЦрддрд╛ рд╣реИ:

{{< image src="/images/posts/office-discord.png" caption="Discord рдкреЗ рд╣рдВрдЧрд╛рдорд╛ рд╣реИ, рднреИрдпрд╛">}}

рд╣рдо рдкреНрд░реЙрдореНрдкреНрдЯ рдФрд░ рд╕реЗрдВрд╕рд░ рд▓рдЧрд╛рддрд╛рд░ рдЯреНрдпреВрди рдХрд░рддреЗ рд░рд╣рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рдЪрд┐реЬрдЪрд┐реЬреЗ рдФрд░ рдлрдиреА рдХреЗ рдмреАрдЪ рдЙрд╕ рдкрддрд▓реА рд░реЗрдЦрд╛ рдкрд░ рд╕рдВрддреБрд▓рд┐рдд рд░рд╣реЗред

рдХреНрдпреЛрдВрдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдмрд╕ JSON рдкреЗрд▓реЛрдб рдЪрд╛рд╣рд┐рдП, рдирдП рд╕реЗрдВрд╕рд░ рдЬреЛрдбрд╝рдирд╛ рдмрдЪреНрдЪреЛрдВ рдХрд╛ рдЦреЗрд▓ рд╣реИред

**рдЕрдЧрд▓рд╛ рдХрджрдотАФрд╕реБрдирдирд╛ (Hearing is next)**

## рдХреЛрдб! рддреБрдо рднреА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реЛ

рд╕рд╛рд░рд╛ рдХреЛрдб рдУрдкрди-рд╕реЛрд░реНрд╕ рд╣реИред рджрд┐рдЦрдиреЗ рдореЗрдВ рдЦреВрдмрд╕реВрд░рдд рдирд╣реАрдВ, рдХреБрдЫ рд╣рд┐рд╕реНрд╕рд╛ рдЦреБрдж LLM рдиреЗ рд╣рдЧреНрдЧрд╛-рдкрд┐рдЯреНрдареВ рд▓рд┐рдЦрд╛ рд╣реИ, рдкрд░ рдЪрд▓рддрд╛ рдзрдорд╛рдХреЗрджрд╛рд░ред

рд╕реЗрдВрд╕рд░ рдкрдХрдбрд╝рдиреЗ рдФрд░ LLM-рд╡рд╛рд▓реЗ рдордЬрд╝рд╛рдХ рдХреЗ рд▓рд┐рдП рдХреЛрдб: [harperreed/houseagent](https://github.com/harperreed/houseagent)

тАЬрдЖрдБрдЦреЛрдВтАЭ рд╡рд╛рд▓реЗ рдХреЛрдб рдХреЗ рд▓рд┐рдП: [harperreed/eyeballs-mqtt](https://github.com/harperreed/eyeballs-mqtt)

рдЗрд╕реЗ рд╕реЗрдЯ-рдЕрдк рдХрд░рдирд╛ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ, рдордЧрд░ рдкреВрд░реА рддрд░рд╣ рдкреНрд▓рдЧ-рдПрдВрдб-рдкреНрд▓реЗ рднреА рдирд╣реАрдВ рд╣реИред рдпрд╣ рдХреЛрдб рдкрд┐рдЫрд▓реЗ 6-8 рдорд╣реАрдиреЛрдВ рд╕реЗ рдмрд┐рдирд╛ рдЦрд╛рд╕ рддрд╛рдо-рдЭрд╛рдо рдХреЗ рдЪрд▓ рд░рд╣рд╛ рд╣реИтАФрд╣рдореЗрдВ рд▓рдЧрд╛рддрд╛рд░ рд╣рдБрд╕рд╛рддрд╛ рд╣реИ рдФрд░ рдореЗрд╣рдорд╛рдиреЛрдВ рдХреЛ тАЬWTF!тАЭ рдмреБрд▓рд╡рд╛рддрд╛ рд╣реИред рдЕрдЧрд░ рддреБрдо рдЗрд╕реЗ рдЖрдЬрд╝рдорд╛рдУ рддреЛ рдЬрд╝рд░реВрд░ рдмрддрд╛рдирд╛ред рджрд┐рдХреНрдХрдд рд╣реЛ рддреЛ [рдИ-рдореЗрд▓](mailto:harper@modest.com) рдорд╛рд░реЛ, рд╢рд╛рдпрдж рдХреБрдЫ рдЬреБрдЧрд╛рдбрд╝ рдмрддрд╛ рджреВрдБ!

рдореЗрд░рд╛ рдЕрдВрджрд╛рдЬрд╝рд╛ рд╣реИ рдХрд┐ рдЬрд▓реНрджреА рд╣реА рдпрд╣ рд╕рдм рд╕реАрдзреЗ Home Assistant рдХреЗ рдЕрдВрджрд░ рд╣реА рд╣реЛ рдкрд╛рдПрдЧрд╛ред

**Part 2 рдЬрд▓реНрдж рдЖрдПрдЧрд╛тАФрдмрддрд╛рдПрдБрдЧреЗ рдХрд┐ VTuber рд░рд┐рдЧ рд╕реЗ рдПрдЬреЗрдВрдЯ рдХреЛ рдЬрд┐рд╕реНрдо рдХреИрд╕реЗ рджрд┐рдпрд╛**