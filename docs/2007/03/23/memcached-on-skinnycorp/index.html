
<!DOCTYPE html>
<html>
  <head>
    
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="shortcut icon" href="/favicon.ico">
      
      <title>Memcached on skinnyCorp &middot; Writing by Harper Reed</title>
      <meta name="description" content="">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-hQpvDQiCJaD2H465dQfA717v7lu5qHWtDbWNPvaTJ0ID5xnPUlVXnKzq7b8YUkbN" crossorigin="anonymous">

      <link rel="alternate" type="application/rss+xml" title="Writing by Harper Reed" href="">
      <meta name="google-site-verification" content="UhNsUFmIygSV6JDvpCaxIJs2mQLgTvuKcFG5epZZiCg" />
      <link rel="stylesheet" href="/css/main.css">
      <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Harper Reed",
      "url": "http://www.harperreed.com",
      "sameAs": [
        "https://instagram.com/harperreed",
        "https://www.linkedin.com/in/harperreed",
        "https://twitter.com/harper"
      ]
    }
      </script>
    
  </head>
  <body>
    <div class="container">

    
      <header class="page-header">
        

      <div class="wrapper">
        <ul class="nav nav-pills pull-right">
            
            <li class="presentation">
              <a href="/about/">About</a>
            </li>
            
            <li class="presentation">
              <a href="/archives/">Historical Archives</a>
            </li>
            
        </ul>
        <h1><a class="page-title" href="/"><i class="fa fa-pencil" aria-hidden="true"></i> Writing by Harper Reed</a></h1>
      </div>
    
    </header>



    
    <div class="page-content">
      
<nav>
  <ul class="pager">
    <li class="previous"><a href="/archives/"><span aria-hidden="true">&larr;</span> Back to Archives</a></li>
  </ul>
</nav>
<div class="post" style="padding-bottom: 50px;">

  <div >
    <h1 ><a title="Permanent Link to Memcached on skinnyCorp." href="/2007/03/23/memcached-on-skinnycorp/" rel="bookmark">Memcached on skinnyCorp</a> <br /><small>Posted on Mar 23, 2007</small></h1>
  </div>
  <div class="postcontent">
    <p><a href="http://www.flickr.com/photos/natatwo/430540094/" title="Photo Sharing"><img src="http://farm1.static.flickr.com/157/430540094_11dc4ca8c8_m.jpg" alt="Memcache versus Diskcache" align="right" height="240" width="168" /></a>In the last year or so Threadless has grown insanely. When I started in 2005, we had around 2 servers and a bundle of downtime. Now, just a year and a half later we have an assload of servers and haven&rsquo;t had any load based downtime in almost 6 months. Its awesome. We have really been striving to keep our server infrastructure two steps ahead of our traffic. It really makes a difference when we get slammed and our servers don&rsquo;t even grown. I love it.</p>

<p>So part of my daily routine of making sure we continue on this path is to constantly keep on the lookout for cool tech that will make our shit FAST. The newest one is <a href="http://www.danga.com/memcached/">memcached</a>. a opensource product made by the <a href="http://www.danga.com/">danga interactive</a>. Danga is the company that started livejournal and created a bunch of neat tools for making scalable websites.</p>

<p>I am using it with PHP and our caching class. It is pretty easy to use. We set up a memcached box with a bundle of ram, ran a couple memcached servers on it and then hook into it with the <a href="http://pecl.php.net/package/memcache">PHP pecl extension for memcached</a>. The speed of the cache is madness. We tested it with a bunch of queries and were really impressed with the increase in speed. its nuts.</p>

<p>I have released a screen capture of our test here: <a href="http://flickr.com/photo_zoom.gne?id=430540094">http://flickr.com/photo_zoom.gne?id=430540094</a>. The test results are thus:
<blockquote>Cached read from shared nfs disk: 0.0032 seconds
Cached read from local disk: 0.0018 seconds
Cached read from memcached: 0.00042 seconds</blockquote>
As you can see, memcached is a bit faster. ;)</p>

<p>The test was simply executing a largish query and caching it, then reading the results from the cache, then clearing the cached results.</p>

<p>We are using a modified object cache I made a minute ago. It is based off my <a href="http://code.google.com/p/nata2/wiki/ObjectbaseClass">ObjectBase class</a> but made to emulate memcached. So it will work with or without a memcached server, which allows us to roll out the infrastructure and then just turn on the memcached servers for better performance. You can check out the <a href="http://nata2.googlecode.com/svn/branches/objectbase_class/class.objectbase.php">source here</a>. I will be releasing it once its a bit more solid.</p>

<p>I can&rsquo;t wait until we integrate it with all of our sites. I will be so happy and our sites will be rather snappy!
<p class="wlWriterSmartContent" id="0767317B-992E-4b12-91E0-4F059A8CECA8:4c5a770a-1cda-46bb-9b04-ba2e669bdc2e" contenteditable="false" style="margin: 0px; padding: 0px; display: inline">[tags]memcached, skinnycorp, threadless, php[/tags]</p></p>

  </div>
</div>

<hr>




<h3>See Also</h3>
<ul>
  
  <li><a href="/2007/03/22/my-birthday-was-awesome/">My birthday was awesome</a> <small>published on Mar 22, 2007</small></li>
  
  <li><a href="/2007/03/22/watch-this-frank-zappa-interview/">Watch this Frank Zappa interview</a> <small>published on Mar 22, 2007</small></li>
  
  <li><a href="/2007/03/21/its-my-birthday-whats-up-now/">Its my birthday! What&#39;s up now!!!</a> <small>published on Mar 21, 2007</small></li>
  
  <li><a href="/2007/03/18/sick./">Sick.</a> <small>published on Mar 18, 2007</small></li>
  
  <li><a href="/2007/03/17/my-newest-twitter-hack-twitter-irc-bot/">My newest twitter hack: Twitter IRC bot</a> <small>published on Mar 17, 2007</small></li>
  
</ul>


<hr>

<nav>
  <ul class="pager">
  
    <li class="previous"><a href="/2007/03/28/hmm./" title="Previous: hmm."><span aria-hidden="true">&larr;</span> Previous entry </a></li>
  
  
    <li class="next"><a href="/2007/03/22/my-birthday-was-awesome/" title="Next: My birthday was awesome">Next entry <span aria-hidden="true">&rarr;</span></a></li>
  
  </ul>
</nav>

    </div>
      <footer class="footer">
    
      <br /><br />
        <p class="text-muted small"><b><i class="fa fa-camera-retro" aria-hidden="true"></i> Writing by Harper Reed</b> &middot; Copyright &copy; Harper Reed &middot; Contact <a href="mailto:harper@nata2.org">Harper Reed</a> &middot; Generated @ Jul 9, 2018</p>
    
      </footer>
      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70650-74', 'auto');
  ga('send', 'pageview');

</script>
  

    </div>
  </body>
</html>
